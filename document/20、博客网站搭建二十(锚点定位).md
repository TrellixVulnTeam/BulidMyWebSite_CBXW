20、博客网站搭建二十(锚点定位)

## 锚点是什么
我们写在`html`文件的容器时，经常会用到`id`属性；
	
	<div id='phone'>Apple</div>

这个`id`属性不仅可以作为`JavaScript`或者`css`代码查询某个容器的标记，还可以作为锚点，定位页面应该前往的位置，输入下面地址，就会进入前往打开home页面，并且视窗前往`id=iphone`的容器。
	
	http://www.myblog.com/home#fruit

## 三种实现方式

### HTML拼接

锚点首先要实现功能，就是当管理员点击消息通知时候，浏览器视窗前往此通知评论位置。

因此首先修改文章详情，给渲染评论的`div`容器添加`id`属性，进入`templates/article/detail.html`:

```
...
<!-- 已有代码，遍历树形结构 -->
{% recursetree comments %}
{% with comment=node %}

<!-- 唯一新增代码：id属性 -->
<div class="..." id="comment_elem_{{ comment.id }}" >

    ...

    <!-- 下面都是已有代码 -->
    <div class="children">
        {{ children }}
    </div>
    {% endif %}
</div>

{% endwith %}
{% endrecursetree %}
...
```
> 我们还是用`comment.id`来给每条评论赋予唯一的id值，注意`id`属性保持唯一性。前面在二级回复的Modal中用了`comment_{{comment.id}}`,这里千万不要重复了。

然后修改通知列表模板。添加锚点，进入`templates/notice/list.html`:

```
...
{% for notice in notices %}
<li ...>
    <!-- 新增 comment_elem_{{ notice.action_object.id }} 锚点 -->
    <a href="{% url "notice:update" %}?article_id={{ notice.target.id }}&notice_id={{ notice.id }}#comment_elem_{{ notice.action_object.id }}"
       target="_blank"
       >
        ...
    </a>
    ...
</li>
{% endfor %}
...
```
> 注意这里`url`拼接两种：
> 
> * 跟在`?`后面的查询参数，用于给视图传递参数，是之前写的旧代码
> * 跟在`#`后面的是锚点，也就是本章正在学的东西

`?` 和 `#`一个重要的差别就是`?`不能够传递到下面页面的`url`中去，而`#`可以。
