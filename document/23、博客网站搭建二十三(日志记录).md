23、博客网站搭建二十三(日志记录)

一旦上线，开发者是如何得知用户到底是哪里出了问题呢？用户大部分与你素昧平生。分布在不同的地方，一旦`DEBUG = False`,出错时候并不会出现报错页面，联用户自己也不清楚哪里出了BUG。日志将会是你最后的倔强。

## 日志的组成
日志是是指程序运行过程中，对状态、时间、错误等的记录。即把运行过程中产生的信息输出或者保存起来，供开发者查询。

DJango使用Python内置的`logging`模块处理日志。关于该模块的使用，[Python文档](https://docs.python.org/3/howto/logging.html)里面有详细的讨论.如果你从未使用，这里是一个很简单的入门。

日志时间信息流程如下：

![logging.jpg](picture23/logging.jpg)

> 看不懂，没关系。以后你需要深度使用日志时候，回来仔细研究就可以了。
> 
> 这份日志配置由`Loggers`,`Handlers`, `Filters`, `Formatters`四部分组成。

## Loggers
`loggers`即记录器，是日志系统的入口。它有三个重要的工作：

* 向应用程序（也就是你的项目）公开几种方法，以便运行时记录消息。
* 根据传递给Logger的消息的严重性，确定出需要处理的消息。
* 将需要处理的消息传递给给所有感兴趣的处理器(Handler)。

每一条写入logger的消息都是一条日志记录。每一条日志记录也包含级别，代表对应消息的严重程度。常用的级别如下：

* `DEBUG`:排查故障时候，使用的地基被系统信息，通常开发时候使用。
* `INFO`: 一般的系统信息，并不算问题
* `WARNING`: 描述系统发生的小问题的信息，但通常不影响功能
* `ERROR`: 描述系统发生的重大问题信息，可能导致功能不正常
* `CRITICAL`: 描述系统发生严重问题的信息，应用程序有崩溃风险

当logger处理一条消息时候，会将自己的日志级别和这条消息的日志级别作对比。如果消息的级别匹配或者高于logger的日志级别，他就会别进一步处理，否则这条消息就会被会略掉。

当logger确定了一条消息需要处理之后，会把它传给`Handler`。

